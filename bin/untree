#!/usr/bin/env bash

export VTREE_HOME="${VTREE_HOME:-$(npm -g root)/vtree}"
export NODE_PATH="${VTREE_HOME}/node_modules"

vtree_version="0.2.1"
dot_dir="$HOME/.vtree"
cache_dir="${dot_dir}/cache/${vtree_version}"

mkdir -p "$cache_dir"

exec "${VTREE_HOME}/node_modules/lumo-cljs/bin/lumo" \
     -c "${VTREE_HOME}/src" \
     -k "${cache_dir}" \
     -m vtree.core \
     "$@"
